<?xml version="1.0" encoding="UTF-8"?>
<!--
Created by Travis Weissenberger on 2017.03.31
Copyright © 2017 Travis Weissenberger. All rights reserved.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <!-- Do not enter tags before the composition line since they are ignored by JSF -->

    <!-- This page is constructed based on the siteTemplate -->
    <ui:composition template="template/siteTemplate.xhtml">

        <ui:define name="title">
            <!-- Set the page title -->
            <h:outputText value="My Account"></h:outputText>
        </ui:define>

        <!-- Create the content for this page below -->
        <ui:define name="editableContent">
            <!--
                You can place p:growl anywhere on your JSF page since the messages are displayed
                as an overlay. The life attribute defines how long the message will be displayed 
                in milliseconds after which it will fade away. 5000 milliseconds = 5 seconds
                
                All 'FacesMessage resultMsg' will be displayed here.
            -->
            <p:growl id="growl" life="5000" />

            <h:form id="UserProfileForm">
                <p:tabView dynamic="true">
                    <p:tab title="My Profile">
                        <table width="100%" border="0" cellspacing="" cellpadding="10">
                            <tr>
                                <td colspan="2" rowspan="6">
                                    <div style="text-align: center">
                                        <h:graphicImage value="#{accountManager.userPhoto()}" styleClass="profilePhoto"/>
                                        <br/>
                                        <h:link outcome="ChangePhoto">[Edit Photo]</h:link>
                                    </div>
                                </td>
                                <td colspan="2" rowspan="7">
                                    <div align="center">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="2">
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>First Name: </pText></div></td>
                                                <td><div style="text-align: left"><pText>#{accountManager.selected.firstName}</pText></div></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Middle Name: </pText></div></td>
                                                <td><pText>#{accountManager.selected.middleName}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Last Name: </pText></div></td>
                                                <td><pText>#{accountManager.selected.lastName}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Address 1: </pText></div></td>
                                                <td><pText>#{accountManager.selected.address1}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Address 2: </pText></div></td>
                                                <td><pText>#{accountManager.selected.address2}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>City: </pText></div></td>
                                                <td><pText>#{accountManager.selected.city}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>State: </pText></div></td>
                                                <td><pText>#{accountManager.selected.state}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Zip Code: </pText></div></td>
                                                <td><pText>#{accountManager.selected.zipcode}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Email: </pText></div></td>
                                                <td><pText>#{accountManager.selected.email}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Phone Number: </pText></div></td>
                                                <td><pText>#{accountManager.selected.phoneNumber}</pText></td>

                                            </tr>
                                            <tr>
                                                <td style="padding-left: 150pt"  width="200"><div style="text-align: left"><pText>Username: </pText></div></td>
                                                <td><pText>#{accountManager.selected.username}</pText></td>

                                            </tr>
                                            <tr> 
                                                <td style="padding-left: 175pt"  width="200" colspan="2">
                                                    <p:button outcome="EditAccount" value="Edit Account" icon="ui-icon-scissors"/>
                                                    <p:spacer width="25"/>
                                                    <p:commandButton value="Delete Account" icon="ui-icon-trash" oncomplete="PF('ConfirmPasswordDialog').show()" 
                                                                     update=":ConfirmPasswordForm">

                                                        <p:confirm header="Account Deletion Confirmation" 
                                                                   message="Are you sure to permanently delete your account? This cannot be undone!" 
                                                                   icon="ui-icon-alert" />
                                                    </p:commandButton>

                                                    <p:confirmDialog id="confirmDialogBox" global="true" showEffect="fade" hideEffect="fade">
                                                        <div align="center">

                                                            <p:commandButton value="NO" type="button" 
                                                                             styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                                            &nbsp;
                                                            <p:commandButton value="YES" type="button" 
                                                                             styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                                        </div>
                                                    </p:confirmDialog>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                            </tr>
                            <tr>
                            </tr>
                            <tr>
                            </tr>
                            <tr>
                            </tr>
                            <tr>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div align="center">
                                        <pText>#{accountManager.selected.username}</pText>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </p:tab>
                    <p:tab title="My Listings">
                        <div style="text-align: center">
                            <h:form> 
                                <p:dataScroller value="#{listingController.myListings}" var="myListing" chunkSize="10">
                                    <f:facet name="header">
                                        My Listings
                                    </f:facet>

                                    <h:panelGrid columns="3" style="width:100%" columnClasses="listingPic,listingInfo,listingButtons">
                                        <p:galleria value="#{listingManager.getPhotos(myListing.id)}" var="image" panelWidth="200" panelHeight="125" showCaption="false">
                                            <p:graphicImage value="#{image}" title="#{image}" height="125px"/>
                                        </p:galleria>


                                        <p:outputPanel>
                                                <h:panelGrid columns="2" cellpadding="5" columnClasses="listingInfoText1,listingInfoText2">
                                                    <h:outputText value="Item Name:" />
                                                    <h:outputText value="#{myListing.itemName}" style="font-weight: bold"/>

                                                    <h:outputText value="Price:" />
                                                    <h:outputText value="#{myListing.price}" style="font-weight: bold">
                                                        <f:convertNumber pattern="¤#,##0" currencySymbol="$" type="currency"/>
                                                    </h:outputText>

                                                    <h:outputText value="Category:" />
                                                    <h:outputText value="#{myListing.category}" style="font-weight: bold"/>

                                                    <h:outputText value="Description:" />
                                                    <h:outputText value="#{myListing.description}" style="font-weight: bold"/>
                                                </h:panelGrid>
                                        </p:outputPanel>

                                        

                                    </h:panelGrid>
                                    <p:separator></p:separator>
                                </p:dataScroller>
                                <br/>
                                <p:button outcome="CreateListing" value="Create a Listing" icon="ui-icon-pencil"/>
                            </h:form>
                        </div>
                    </p:tab>
                    <p:tab title="Saved Listings">
                        <div style="text-align: center">
                            <h2>You have not saved any listings!</h2>
                        </div>
                    </p:tab>
                </p:tabView>
            </h:form>
            <ui:include src="DeleteAccountDialog.xhtml"/>
        </ui:define>

    </ui:composition>
    <!-- Do not enter tags after the composition line since they are ignored by JSF -->

</html>
