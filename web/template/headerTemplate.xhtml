<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <!--
    *********************************************
    * Header Component of Template siteTemplate *
    *********************************************
    This page's content is displayed on the top of each page created based on the siteTemplate.
    Changes made in this file will show up automatically with all pages created based on the
    siteTemplate for the entire site, achieving great maintainability.
    -->

    <!-- Do not enter tags before the composition line since they are ignored by JSF -->
    <ui:composition>
        <h:panelGrid columns="2" columnClasses="leftTopCornerAlign, rightTopCornerAlign">
            <!-- Use absolute path for the image file -->
            <h:link outcome="index"><img src="resources/images/sellStuffLogo.png" 
                                         style="width:100%; height:100%; max-height:64px; max-width:255px; border: none"
                                         alt="Sell Stuff Logo" /></h:link>


            <h:panelGroup>
                <!-- 
                =============================================================================
                * PrimeFaces Menubar UI Component: Horizontal Cascading Navigation Menu Bar *
                =============================================================================
                Copied from http://www.primefaces.org/showcase/ui/menu/menubar.xhtml 
                together with MenuView.java file. Read its Documentation.
                -->
                <h:form>
                    <!-- Welcome the customer if signed in 
                    <c:if test="#{accountManager.isLoggedIn() == true}">
                        <div class="smallText" align="left">Hello, #{accountManager.selected.firstName}</div>
                    </c:if>
                    <c:if test="#{accountManager.isLoggedIn() == false}">
                        <div class="smallText" align="left">Hello, Guest</div>
                    </c:if>
                    -->
                    <!--
                        PrimeFaces Growl displays messages in an overlay. Place p:growl anywhere in your JSF page. 
                        The location of growl in a JSF page does not matter since the messages are displayed
                        as an overlay. The following will display the messages for 5 seconds and then fade away.
                    -->
                    <p:growl id="messages" life="5000" />

                    <p:menubar style="text-align: center">
                        <!-- The file index.xhtml is at the root level; therefore, we just specify its filename -->

                       <!--
                        <c:if test="#{accountManager.isLoggedIn() == true}">
                            <p:menuitem value="Sign Out" outcome="index" icon="ui-icon-plus" ajax="false" />
                            <p:menuitem value="My Account" outcome="MyAccount" icon="ui-con-plus" ajax="false" />
                            
                        </c:if>
                        <c:if test="#{accountManager.isLoggedIn() == false}">
                       -->
                            <p:menuitem value="Sign In" outcome="SignIn" icon="ui-icon-plus" ajax="false" />
                            <p:menuitem value="Create an Account" outcome="CreateAnAccount" icon="ui-icon-plus" ajax="false" />
                        <!--
                            </c:if>
                        -->
                        
                        <p:submenu label="Browse Listings" icon="ui-icon-heart">
                            <p:menuitem value="Category 1" outcome="Browse" ajax="false"/>
                            <p:menuitem value="Category 2" outcome="Browse" ajax="false"/>
                            <p:menuitem value="Category 3" outcome="Browse" ajax="false"/>
                            <p:menuitem value="Category 4" outcome="Browse" ajax="false"/>
                            <p:menuitem value="Category 5" outcome="Browse" ajax="false"/>

                        </p:submenu>
                        <p:menuitem value="Search Listings" onclick="PF('ListingSearchDialog').show()" icon="ui-icon-search"/>
                    </p:menubar>
                </h:form>

            </h:panelGroup>
        </h:panelGrid>

        
        <!-- 
        ====================================================================
        |  Clicking the LISTING SEARCH link displays this Dialog window for  |
        |  the user to enter a search query and click the Search button.   |
        ====================================================================
        -->
        <p:dialog position="center center" id="ListingSearchDialog" widgetVar="ListingSearchDialog" 
                  modal="true" resizable="false" appendTo="@(body)" header="Search Listings" width="300px">

            <h:form id="searchDialogForm">
                <div align="center" bgcolor="#3e7e98" >
                    <br />
                    <h:outputLabel for="searchQueryField" value="Search Listings:" />
                    <br /><br />
                    
                    <!-- 
                    The search query entered by the user in the inputText field is set to be 
                    the value of the searchQuery property of the searchedListingController
                    CDI @Named bean by using the Expression Language.
                    -->
                    <h:inputText id="searchQueryField" style="width:200px"
                                 value="#{searchedListingController.searchQuery}" >
                    </h:inputText>  
                    <br /><br /><br />
                    
                    <!--  SEARCH button:
                    Clicking the Search button invokes the performSearch() method of the
                    searchedListingController CDI @Named bean. The performSearch() method executes
                    the search for the searchQuery property value and at the end of the execution with
                    
                        return "ListingSearchResults?faces-redirect=true";
                    
                    it returns "ListingSearchResults" as the name of the XHTML file to display.
                    -->
                    <p:commandButton value="Search" id="searchButton"  ajax="false" 
                                     styleClass="commandButton" icon="ui-icon-search"
                                     action="#{searchedListingController.performSearch()}" />
                    &nbsp;&nbsp;
                    
                    <!-- CANCEL button -->
                    <p:commandButton value="Cancel" onclick="PF('ListingSearchDialog').hide()" 
                                     styleClass="commandButton" icon="ui-icon-cancel"/>
                    <br /><br />
                </div>
            </h:form>  

        </p:dialog>
    </ui:composition>
    <!-- Do not enter tags before the composition line since they are ignored by JSF -->

</html>